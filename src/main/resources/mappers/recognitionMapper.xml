<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 게시판 네임스페이스(사용영역) 설정 -->
<mapper namespace="com.gsitm.meeting.mappers.recognitionMapper">
	<select id="resList" resultType="com.gsitm.meeting.reservation.dto.ReservationDTO$ReservationTest" >
		select res_id resId,e.emp_name empName, mr.mr_name mrName,to_char(res_time,'YYYY-MM-DD" "HH24:MI:SS') resDate,to_char(res_start_time,'YYYY-MM-DD" "HH24:MI:SS') resStartDate,to_char(res_end_time,'YYYY-MM-DD" "HH24:MI:SS') resEndDate,
		       res_purpose resPurpose,res_attend_cnt resAttendCnt,res_add_request resAddRequest,res_state resState,res_snack resSnack,
		       res_type resType,res_cancle resCancle,res_cost resCost,res_outside resOutside   
		from employee e,reservation r, meeting_room mr
		where e.emp_id=r.emp_id
		and mr.mr_id = r.mr_id
	</select>
	<select id="resNewList" resultType="string" parameterType="string">
		select res_state resState
		from employee e,reservation r, meeting_room mr
		where e.emp_id=r.emp_id
		and r.mr_id = mr.mr_id
		and res_id=#{resId}
	</select>
	<update id="updateResState">
		UPDATE reservation
		SET res_state='res_2'
		WHERE res_id = #{redId} 
	</update>
	<!-- 마이페이지(옮기기)  -->
	<!-- <select id="myResList" resultType="com.gsitm.meeting.reservation.dto.ReservationDTO$ReservationTest" parameterType="string">
		select r.res_id resId,to_char(res_time,'YYYY-MM-DD"T"HH24:MI:SS') resDate,
	        to_char(res_start_time,'YYYY-MM-DD"T"HH24:MI:SS') resStartDate,
	        to_char(res_end_time,'YYYY-MM-DD"T"HH24:MI:SS') resEndDate ,
	        res_state resState,
	        b.br_name brName,m.mr_name mrName,r.emp_id empId
		from employee e ,reservation r,meeting_room m,branch b
		where e.emp_id = r.emp_id
		and m.br_id=b.br_id
		and m.mr_id = r.mr_id
		and e.emp_id=#{empId}
	</select> -->
</mapper>